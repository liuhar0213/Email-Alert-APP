# Email Alert APP v4.0 - 通知监听功能

## 新增功能

### 1. 通知监听服务 (Notification Listener)
- 可以监听TradingView APP的通知
- 可以监听邮件APP(Gmail/QQ邮箱)的通知
- 零延迟警报 - 收到通知后立即响铃
- 无需外网穿透或服务器

### 2. 工作原理
```
TradingView APP发送通知
         ↓
NotificationListenerService监听到通知
         ↓
检查通知内容是否包含"警报"/"alert"
         ↓
发送广播到主APP
         ↓
触发响铃和振动
```

## 使用步骤

### 第一次使用:
1. 安装APK后,打开APP
2. APP会自动打开"通知使用权限"设置页面
3. 找到"Email Alert"并启用通知访问权限
4. 返回APP,现在APP可以监听通知了

### 日常使用:
- **保持APP在后台运行即可**
- TradingView发送警报通知时,APP会自动响铃
- 邮箱APP收到TradingView邮件警报时,APP也会响铃

## 支持的APP
- TradingView (com.tradingview.*)
- Gmail (com.gmail.*)
- QQ邮箱 (com.qq.reader)
- 其他包含"email"关键词的邮件APP

## 警报关键词
通知标题或内容包含以下任意关键词时会触发警报:
- `alert` (英文)
- `警报` (中文简体)
- `警報` (中文繁体)
- `提醒`

## 技术细节
- 使用Android NotificationListenerService
- Java服务 + Python主程序
- 广播机制传递通知数据
- 与现有SSE/Polling功能并存

## 权限要求
新增权限:
- `BIND_NOTIFICATION_LISTENER_SERVICE` - 监听通知

## 版本历史
- v3.7: 修改默认服务器URL为port 80
- v4.0: 添加通知监听功能(零延迟警报)
