# 🚀 快速开始 - Email Alert App

## 📂 文件说明

```
email_alert_app/
├── main.py              # App主程序（核心代码）
├── buildozer.spec       # 打包配置文件
├── requirements.txt     # Python依赖
├── README.md           # 完整说明文档
├── 打包APK教程.md       # APK打包详细教程
└── 快速开始.md          # 本文件（最简单的使用指南）
```

---

## 🎯 推荐方案：在线打包（最简单）

### 使用GitHub Actions自动打包

**总耗时**：30分钟
**难度**：⭐ (最简单)
**需要**：GitHub账号（免费注册）

#### 步骤：

1. **注册GitHub账号**
   - 访问 https://github.com/
   - 点击 Sign up
   - 免费注册

2. **创建仓库**
   - 点击右上角 `+` → New repository
   - 名称：`email-alert-app`
   - 选择 Public
   - 点击 Create repository

3. **上传文件**
   - 点击 Add file → Upload files
   - 上传 `main.py` 和 `buildozer.spec`
   - 点击 Commit changes

4. **创建自动打包脚本**
   - 点击 Add file → Create new file
   - 文件名：`.github/workflows/build.yml`
   - 复制以下内容：

```yaml
name: Build APK

on:
  push:
    branches: [ master, main ]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y git zip unzip openjdk-17-jdk
        pip install buildozer cython
    - name: Build APK
      run: buildozer android debug
    - name: Upload APK
      uses: actions/upload-artifact@v3
      with:
        name: app-apk
        path: bin/*.apk
```

5. **触发构建**
   - 点击 Actions 标签
   - 点击左侧 Build APK
   - 点击右侧 Run workflow → Run workflow
   - 等待15-20分钟

6. **下载APK**
   - 构建完成后，点击构建记录
   - 在 Artifacts 部分下载APK
   - 传到手机安装

---

## 📱 安装使用

### 1. 安装APK

1. 将APK传到手机（微信/QQ/数据线）
2. 点击APK文件
3. 允许"未知来源安装"
4. 点击安装

### 2. 授予权限

打开App后，授予以下权限：
- ✅ 网络访问
- ✅ 振动
- ✅ 通知

### 3. 允许后台运行（重要！）

**Android 通用设置**：
- 设置 → 应用 → Email Alert
- 电池 → 不限制后台活动
- 自启动 → 允许

**不同品牌**：
- **小米**：安全中心 → 授权管理 → 自启动管理 → Email Alert → 允许
- **华为**：设置 → 应用 → 应用启动管理 → Email Alert → 手动管理 → 全允许
- **OPPO**：设置 → 电池 → 应用耗电管理 → Email Alert → 允许后台运行
- **vivo**：设置 → 电池 → 后台高耗电 → Email Alert → 允许

### 4. 连接服务器

1. **确保电脑的邮件监控程序正在运行**
   ```bash
   cd C:\Users\27654\Desktop\交易\project\email_watcher
   python email_watcher.py
   ```

2. **在App中输入服务器地址**
   - 格式：`http://10.0.0.170:8080`
   - 确保手机和电脑在同一WiFi

3. **点击"连接"**
   - 状态应该显示 "已连接 ✓"

### 5. 测试

1. 点击 "测试提醒" 按钮
2. 应该：
   - 播放警报音（70秒）
   - 持续振动（70秒）
   - 显示通知

### 6. 锁屏测试

1. 连接成功后锁定手机
2. 在电脑上触发TradingView邮件
3. 手机应该：
   - 屏幕亮起
   - 播放警报音
   - 持续振动

---

## ⚡ 快速故障排查

### 问题：连接失败

**解决**：
1. 手机和电脑在同一WiFi吗？
2. IP地址对吗？（电脑运行`ipconfig`查看）
3. 电脑防火墙关闭了吗？
4. email_watcher程序运行了吗？

**测试**：手机浏览器访问 `http://10.0.0.170:8080`，能打开就是网络正常。

### 问题：锁屏没声音

**解决**：
1. 允许App后台运行（见上方"允许后台运行"）
2. 关闭勿扰模式
3. 调高通知音量（不是媒体音量）
4. 允许App发送通知

### 问题：App被杀掉

**解决**：
- 参考"允许后台运行"部分
- 不同手机品牌设置不同
- 关键：电池优化 → 不限制

---

## 📞 需要帮助？

### 选择1：使用在线服务（推荐）

**最简单的方案**：
- 钉钉机器人（如果能创建的话）
- 企业微信机器人（如果能创建的话）
- 不需要打包APK

### 选择2：打包独立App（最稳定）

按照本文档的 "推荐方案" 部分操作

### 选择3：继续使用Web版

- 手机保持屏幕常亮
- 充电时使用
- 受限但能工作

---

## 🎁 App功能列表

- ✅ 连接电脑服务器
- ✅ 实时接收邮件提醒
- ✅ 系统警报音（70秒）
- ✅ 持续振动（70秒）
- ✅ 锁屏完美支持
- ✅ 通知栏显示
- ✅ 提醒记录
- ✅ 测试功能
- ✅ 深色主题

---

## 📊 完整方案对比

| 方案 | 锁屏 | 铃声 | 稳定性 | 难度 |
|------|------|------|--------|------|
| **独立App** | ✅ | ✅ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 企业微信 | ✅ | ⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐ |
| 钉钉 | ✅ | ⭐⭐ | ⭐⭐⭐⭐ | ⭐ |
| Web版 | ⭐ | ⭐ | ⭐⭐ | ⭐ |

---

## 🎯 我的建议

### 如果你愿意花30分钟：
→ 使用 **GitHub Actions 打包APK**（最完美的方案）

### 如果你只有5分钟：
→ 继续尝试 **企业微信机器人**（够用且简单）

### 如果什么都不想弄：
→ 用 **Web版 + 屏幕常亮**（凑合能用）

---

**现在就开始吧！选择GitHub Actions方案，30分钟后你就有自己的独立App了！**
